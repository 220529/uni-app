# å¼€å‘è§„èŒƒ

> CPM å¾®ä¿¡å°ç¨‹åº v2 å¼€å‘è§„èŒƒå’Œæœ€ä½³å®è·µ

## ğŸ¨ ä»£ç é£æ ¼è§„èŒƒ

- **120å­—ç¬¦è¡Œå®½**ï¼Œå•å¼•å·ï¼Œå¿…é¡»åˆ†å·
- **ESLint + Prettier** è‡ªåŠ¨ä¿®å¤
- **uni** ç­‰å…¨å±€å˜é‡å·²é…ç½®ç™½åå•

```bash
pnpm run format    # æ ¼å¼åŒ–
pnpm run lint      # æ£€æŸ¥ä¿®å¤
```

## ğŸ“ Git æäº¤è§„èŒƒ

### æäº¤ç±»å‹
| ç±»å‹ | æè¿° | ç¤ºä¾‹ |
|------|------|------|
| âœ¨ feat | æ–°åŠŸèƒ½ | `feat: æ·»åŠ ç”¨æˆ·ç™»å½•åŠŸèƒ½` |
| ğŸ› fix | ä¿®å¤bug | `fix: ä¿®å¤ç™»å½•é¡µé¢é—ªçƒé—®é¢˜` |
| ğŸ“ docs | æ–‡æ¡£å˜æ›´ | `docs: æ›´æ–°APIæ–‡æ¡£` |
| ğŸ’„ style | ä»£ç æ ¼å¼ | `style: ä¿®å¤ä»£ç ç¼©è¿›` |
| â™»ï¸ refactor | é‡æ„ | `refactor: ä¼˜åŒ–è¯·æ±‚æ‹¦æˆªå™¨é€»è¾‘` |
| âš¡ perf | æ€§èƒ½ä¼˜åŒ– | `perf: ä¼˜åŒ–é¡µé¢æ¸²æŸ“æ€§èƒ½` |
| âœ… test | æµ‹è¯•ç›¸å…³ | `test: æ·»åŠ ç™»å½•åŠŸèƒ½æµ‹è¯•` |
| ğŸ”§ chore | å·¥å…·å˜åŠ¨ | `chore: æ›´æ–°ä¾èµ–ç‰ˆæœ¬` |

```bash
# æ¨èä½¿ç”¨å·¥å…·æäº¤
pnpm run commit
```

## ğŸ”„ å¼€å‘æµç¨‹

```bash
git add .
pnpm run commit    # è‡ªåŠ¨æ ¼å¼åŒ– + è§„èŒƒæäº¤
```

**Git Hooks**: pre-commit è‡ªåŠ¨ä¿®å¤æ ¼å¼ï¼Œcommit-msg éªŒè¯æäº¤ä¿¡æ¯

## ğŸ§© ç»„ä»¶å¼€å‘è§„èŒƒ

- **å‘½å**: æ–‡ä»¶å¤¹ PascalCaseï¼Œç»„ä»¶å‰ç¼€ `cpm-`
- **ç»“æ„**: ç»Ÿä¸€ä½¿ç”¨ `components/cpm-xxx/index.vue`

```vue
<template>
  <view class="cpm-example">
    <!-- å†…å®¹ -->
  </view>
</template>

<script setup>
// é€»è¾‘
</script>

<style lang="scss" scoped>
.cpm-example { /* æ ·å¼ */ }
</style>
```

## ğŸ”Œ API å¼€å‘è§„èŒƒ

```javascript
// api/example.js
export default {
  getList: (params) => request.get('/api/list', { params }),
  getDetail: (id) => request.get(`/api/detail/${id}`),
  create: (data) => request.post('/api/create', data),
};

// é¡µé¢ä½¿ç”¨
import { userApi } from '@/api';
const result = await userApi.getUserInfo();
```

## ğŸ“ ç›®å½•ç»“æ„è§„èŒƒ

```
src/
â”œâ”€â”€ api/          # æ¥å£å±‚
â”œâ”€â”€ auth/         # è®¤è¯æ¨¡å—
â”œâ”€â”€ components/   # ç»„ä»¶
â”œâ”€â”€ pages/        # é¡µé¢
â”œâ”€â”€ utils/        # å·¥å…·
â””â”€â”€ store/        # çŠ¶æ€ç®¡ç†
```

## ğŸŒ ç¯å¢ƒå˜é‡è§„èŒƒ

**é…ç½®æ–‡ä»¶**: `.env`, `.env.local`, `.env.development`, `.env.production`

```bash
# ç»Ÿä¸€ä½¿ç”¨ VITE_ å‰ç¼€
VITE_API_BASE_URL=https://api.example.com
VITE_TENANT_ID=1
VITE_ENABLE_DEBUG=true
```

```javascript
// utils/env.js ä½¿ç”¨
export const API_BASE_URL = import.meta.env.VITE_API_BASE_URL;
```

## â“ å¸¸è§é—®é¢˜

- **æ ¼å¼é”™è¯¯**: è¿è¡Œ `pnpm run lint` è‡ªåŠ¨ä¿®å¤
- **æäº¤è¢«æ‹¦æˆª**: ä½¿ç”¨ `pnpm run commit` è€Œä¸æ˜¯ `git commit`  
- **ç¯å¢ƒå˜é‡å¤±æ•ˆ**: æ£€æŸ¥ `VITE_` å‰ç¼€å’Œæ–‡ä»¶å‘½å
- **Git Hooks å¤±æ•ˆ**: ç¡®ä¿æ‰§è¡Œè¿‡ `pnpm install`

## ğŸ¯ æœ€ä½³å®è·µ

- å®‰è£…ç¼–è¾‘å™¨ Prettier æ’ä»¶
- ç»„ä»¶ç»Ÿä¸€ `cpm-` å‰ç¼€
- ä½¿ç”¨ API æ¨¡å—è€Œä¸æ˜¯ç›´æ¥è¯·æ±‚
- æ–°æˆå‘˜å¿…é¡»å…ˆè¿è¡Œ `pnpm install`
